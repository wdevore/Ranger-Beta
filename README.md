# Ranger-Beta
A c++17 continuation of Ranger-Alpha and FlutterRanger

This project was started in April 2025 and is a mixture of:

- [Ranger-Alpha](https://github.com/wdevore/Ranger-Alpha) was done in March 2016
- [Ranger-Go-IDE](https://github.com/wdevore/Ranger-Go-IGE) was done is 2020
- [SimpleOpenGL-Go](https://github.com/wdevore/SimpleOpenGL-Go) was done in 2020

# Dev Notes:
When you want to create a new project (aka another folder under examples) You
need to do a few things:
1) update *Ranger-Beta/.vscode/settings.json* and change <path> to the folder where the project is located.
2) update the ```examples/<path to project>/CmakeList.txt``` such that the project name matches the *settings.json* file:
```cmake
project(<your project-name> VERSION 0.1.0 LANGUAGES C CXX)
```
3) (potentially optional) run ```Delete Catch and Reconfigure```

You now be able to be able to go to the CMake extension and hover over the *Build* item and click on the *Edit* icon. This should bring up a list of targets. Select that matches the *settings.json* file.

# Checkmark ✔

# Tasks
* Complete shapes ✔
* Event system ✔
* Integrate Node system ✔
  * Zoom Node ✔
  * Dragging ✔
  * Space mapping ✔
* Zones
* Interpolation
* Fonts
  * Vector <-- **INPROGRESS**
  * Bitmap ✔
* Box2D
* Particles
* Physics
  * Ship motion <-- **WORKING**
* Filters
* Animation (tweening) *Using tanema's library*: https://github.com/tanema/gween

# Code documentation

## Shader
A Shader has a program associated with it. You construct a Shader using Vertex and Fragment shader programs.

# Atlas
An Atlas has a Shader associated with it. It contains vector shapes.

# Fonts

0x18 24 42 42 24 18 00 00
00011000 0x18
00100100 0x24
01000010 0x42
01000010 0x42
00100100 0x24
00011000 0x18
00000000 0x00
00000000 0x00

## Font tasks
- For each 0 pixel we render with a dark color (to be done later)
- For each 1 pixel we render with a light color.

StaticMonoAtlas:

We add a new shape that is built using 8x8=64 rectangles. Each rectangle is the shape is displaced by a gap. All rectangles fill the unit space.
We then create Indices for each character. In the first draft only pixels a "1" are drawn. For example, to render an exclamation point you would need 5 indice definitions (aka offsets in the EBO). Basically we keep adding indices at the next available offset.

We also keep a map of ```<String,int-offset>``` so we can lookup the characater index, the map is stored in darkrose_bitmap_font (dbf). dbf is given an ```evn``` for referencing the atlas. It then uses a generator to create rectangle unit squares. dbf then generates indices for each character.
once complete the shape can be added to the atlas and then can be initialized env.postInitiailize();
Note: that postInitiailize bakes the atlas and this can only be done once all the shapes are present.

- In the render call we use a localModel that is composited with the incoming
model. The localModel has appended a translation equal to 1.0.
- The fontNode has a scale equal to font size.

# Atlases
An Atlas combines Geometry with Shaders. Some Atlases are given Geometry and others generate geometry.

An Atlas contains a shader that has an VAO, EBO, VBO. However, an UBO shares a common buffer for the Projection and View camera matrices.

# From Geometry to Atlas to Rendering

## Geometry construction
For each Atlas the following sequence of events is required:

1) Create geometry (vertices and indices)
    - using either the *ShapeGenerator* or
    - your own custom generator, for example, the font Atlases use their own generator.
2) Construct Atlas
    - Initialize shaders
        - Sets paths to shader files
        - Compiles shaders
3) Pass geometry to Atlas. Atlas consumes geometry
    - Geometry is uploaded to GL buffers
4) Fetch Model and Color uniforms
5) Set Projection Matrix
6) Build UBO
    - Pass list of programs generated by Atlases
    - Generate UBO Id
    - Bind UBO to binding Point (i.e. 0)
    - Link shader programs to binding Point
    - Copy Projection and View matrices to Sub buffers


## Raw Atlas shaders sequence
This is a basic straight sequence:

1) Build and compile all shaders
2) Build and Bind VAO, VBO, and EBO
3) Fetch Model and Color uniforms
4) Set Projection Matrix
5) Build UBO
6) Link shader programs to binding Point (i.e. 0)
7) Copy Projection and View matrices to Sub buffers
